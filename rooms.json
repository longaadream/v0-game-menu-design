[
  {
    "id": "e997212b-22fc-46f7-b8eb-b3ac67752fde",
    "name": "File Store Test Room",
    "status": "waiting",
    "createdAt": 1771343839053,
    "maxPlayers": 2,
    "players": [],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "198f266a-54e9-4789-9545-0679922022c1",
    "name": "Frontend Test Room",
    "status": "waiting",
    "createdAt": 1771344143900,
    "maxPlayers": 2,
    "players": [],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "NVsBG",
    "name": "Short ID Test 2",
    "status": "waiting",
    "createdAt": 1771344300452,
    "maxPlayers": 2,
    "players": [],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "aeVlM",
    "name": "Cross Device Test Room",
    "status": "waiting",
    "createdAt": 1771344428098,
    "maxPlayers": 2,
    "players": [],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "KgWGm",
    "name": "Case Sensitivity Test",
    "status": "waiting",
    "createdAt": 1771344641857,
    "maxPlayers": 2,
    "players": [],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "mxvka",
    "name": "Case Insensitive Test",
    "status": "waiting",
    "createdAt": 1771344698821,
    "maxPlayers": 2,
    "players": [],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "zzvtk",
    "name": "Complete Test Room",
    "status": "waiting",
    "createdAt": 1771344772295,
    "maxPlayers": 2,
    "players": [],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "poabv",
    "name": "Debug Test Room",
    "status": "waiting",
    "createdAt": 1771344897348,
    "maxPlayers": 2,
    "players": [],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "virlz",
    "name": "Global Store Test Room",
    "status": "waiting",
    "createdAt": 1771344976619,
    "maxPlayers": 2,
    "players": [
      {
        "id": "2c7f045e-30ee-46c6-b263-d42b864f26ad",
        "name": "GlobalPlayer",
        "joinedAt": 1771344977713
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "yqtrs",
    "name": "Final Test Room",
    "status": "waiting",
    "createdAt": 1771345139643,
    "maxPlayers": 2,
    "players": [
      {
        "id": "ebfd8601-e77a-405a-8c7c-b8ff7446f09c",
        "name": "Player1",
        "joinedAt": 1771345139694
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "1upwq",
    "name": "Two Player Test Room",
    "status": "in-progress",
    "createdAt": 1771345161173,
    "maxPlayers": 2,
    "players": [
      {
        "id": "054ca7c6-412a-4a4f-aacd-f92a3b288ae3",
        "name": "Player1",
        "joinedAt": 1771345161206
      },
      {
        "id": "baa1520a-f42c-41a6-995d-68253d14bd14",
        "name": "Player2",
        "joinedAt": 1771345161227
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "Player1-1",
          "templateId": "red-soldier",
          "ownerPlayerId": "Player1",
          "faction": "red",
          "currentHp": 100,
          "x": 1,
          "y": 1,
          "skills": []
        },
        {
          "instanceId": "Player2-1",
          "templateId": "blue-soldier",
          "ownerPlayerId": "Player2",
          "faction": "blue",
          "currentHp": 100,
          "x": 6,
          "y": 4,
          "skills": []
        }
      ],
      "pieceStatsByTemplateId": {
        "red-soldier": {
          "maxHp": 100,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-soldier": {
          "maxHp": 100,
          "attack": 18,
          "defense": 6,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-shot": {
          "id": "basic-shot",
          "name": "Basic Shot",
          "description": "Simple attack used as 普通技能。",
          "kind": "active",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "isChargeSkill": false,
          "chargeCost": 0,
          "powerMultiplier": 1
        },
        "charge-burst": {
          "id": "charge-burst",
          "name": "Charge Burst",
          "description": "Consumes charge points to deal high damage.",
          "kind": "active",
          "cooldownTurns": 1,
          "maxCharges": 3,
          "isChargeSkill": true,
          "chargeCost": 1,
          "powerMultiplier": 2
        }
      },
      "players": [
        {
          "playerId": "Player1",
          "chargePoints": 0
        },
        {
          "playerId": "Player2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "Player1",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "phmir",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771345245123,
    "maxPlayers": 2,
    "players": [
      {
        "id": "3153b16c-64ad-4d55-aa2c-4a6a67ea6740",
        "name": "1",
        "joinedAt": 1771345245164
      },
      {
        "id": "f9e17648-43db-4036-b9bb-c4cfde3deacd",
        "name": "2",
        "joinedAt": 1771345252402
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "bwmex",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771346038152,
    "maxPlayers": 2,
    "players": [
      {
        "id": "19af6fd4-6da7-4cfa-a9c8-9c39760e51d9",
        "name": "1",
        "joinedAt": 1771346038775
      },
      {
        "id": "75f1a9e1-9d4a-4a54-aa90-d71f7cd49a91",
        "name": "2",
        "joinedAt": 1771346052161
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "zmlr6",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771346262301,
    "maxPlayers": 2,
    "players": [
      {
        "id": "9ce39e5c-134a-4859-b534-a7e4864ce905",
        "name": "1",
        "joinedAt": 1771346262358
      },
      {
        "id": "48f145ff-863e-4ee9-bfaf-beec048a5253",
        "name": "2",
        "joinedAt": 1771346273356
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-soldier",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "x": 1,
          "y": 1,
          "skills": []
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-soldier",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "x": 6,
          "y": 4,
          "skills": []
        }
      ],
      "pieceStatsByTemplateId": {
        "red-soldier": {
          "maxHp": 100,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-soldier": {
          "maxHp": 100,
          "attack": 18,
          "defense": 6,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-shot": {
          "id": "basic-shot",
          "name": "Basic Shot",
          "description": "Simple attack used as 普通技能。",
          "kind": "active",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "isChargeSkill": false,
          "chargeCost": 0,
          "powerMultiplier": 1
        },
        "charge-burst": {
          "id": "charge-burst",
          "name": "Charge Burst",
          "description": "Consumes charge points to deal high damage.",
          "kind": "active",
          "cooldownTurns": 1,
          "maxCharges": 3,
          "isChargeSkill": true,
          "chargeCost": 1,
          "powerMultiplier": 2
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "1",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "39djf",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771347017541,
    "maxPlayers": 2,
    "players": [
      {
        "id": "661b23d5-7d2f-4287-89c7-ae994c80f735",
        "name": "1",
        "joinedAt": 1771347017601
      },
      {
        "id": "35b27bb9-87b4-4b10-b143-bd6931a5201f",
        "name": "2",
        "joinedAt": 1771347022089
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-soldier",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "x": 1,
          "y": 1,
          "skills": []
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-soldier",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "x": 6,
          "y": 4,
          "skills": []
        }
      ],
      "pieceStatsByTemplateId": {
        "red-soldier": {
          "maxHp": 100,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-soldier": {
          "maxHp": 100,
          "attack": 18,
          "defense": 6,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-shot": {
          "id": "basic-shot",
          "name": "Basic Shot",
          "description": "Simple attack used as 普通技能。",
          "kind": "active",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "isChargeSkill": false,
          "chargeCost": 0,
          "powerMultiplier": 1
        },
        "charge-burst": {
          "id": "charge-burst",
          "name": "Charge Burst",
          "description": "Consumes charge points to deal high damage.",
          "kind": "active",
          "cooldownTurns": 1,
          "maxCharges": 3,
          "isChargeSkill": true,
          "chargeCost": 1,
          "powerMultiplier": 2
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "1",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "bxh5k",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771347160363,
    "maxPlayers": 2,
    "players": [
      {
        "id": "759c954c-89c4-46df-b2f1-2c6f05eda4c5",
        "name": "1",
        "joinedAt": 1771347160411
      },
      {
        "id": "a9c71a7c-6f33-47e8-b1cc-f2e571d16287",
        "name": "2",
        "joinedAt": 1771347165034
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-soldier",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "x": 2,
          "y": 1,
          "skills": []
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-soldier",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "x": 6,
          "y": 4,
          "skills": []
        }
      ],
      "pieceStatsByTemplateId": {
        "red-soldier": {
          "maxHp": 100,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-soldier": {
          "maxHp": 100,
          "attack": 18,
          "defense": 6,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-shot": {
          "id": "basic-shot",
          "name": "Basic Shot",
          "description": "Simple attack used as 普通技能。",
          "kind": "active",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "isChargeSkill": false,
          "chargeCost": 0,
          "powerMultiplier": 1
        },
        "charge-burst": {
          "id": "charge-burst",
          "name": "Charge Burst",
          "description": "Consumes charge points to deal high damage.",
          "kind": "active",
          "cooldownTurns": 1,
          "maxCharges": 3,
          "isChargeSkill": true,
          "chargeCost": 1,
          "powerMultiplier": 2
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "2",
        "turnNumber": 2,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "aaa7e",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771347788960,
    "maxPlayers": 2,
    "players": [
      {
        "id": "edd25c42-7989-4d6f-aa34-9b6b642a1bbc",
        "name": "1",
        "joinedAt": 1771347789004
      },
      {
        "id": "d40a423c-c3f2-4cd0-b539-3a28ac039777",
        "name": "2",
        "joinedAt": 1771347794064
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-soldier",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "x": 1,
          "y": 1,
          "skills": []
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-soldier",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "x": 6,
          "y": 4,
          "skills": []
        }
      ],
      "pieceStatsByTemplateId": {
        "red-soldier": {
          "maxHp": 100,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-soldier": {
          "maxHp": 100,
          "attack": 18,
          "defense": 6,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-shot": {
          "id": "basic-shot",
          "name": "Basic Shot",
          "description": "Simple attack used as 普通技能。",
          "kind": "active",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "isChargeSkill": false,
          "chargeCost": 0,
          "powerMultiplier": 1
        },
        "charge-burst": {
          "id": "charge-burst",
          "name": "Charge Burst",
          "description": "Consumes charge points to deal high damage.",
          "kind": "active",
          "cooldownTurns": 1,
          "maxCharges": 3,
          "isChargeSkill": true,
          "chargeCost": 1,
          "powerMultiplier": 2
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "2",
        "turnNumber": 2,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "urvel",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771347965137,
    "maxPlayers": 2,
    "players": [
      {
        "id": "a7051bf5-9f47-41e7-bbf9-3eb99845570e",
        "name": "1",
        "joinedAt": 1771347965172
      },
      {
        "id": "f9d13b6d-82c1-4236-b525-7100022fa110",
        "name": "2",
        "joinedAt": 1771347970114
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-soldier",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "x": 1,
          "y": 1,
          "skills": []
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-soldier",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "x": 6,
          "y": 4,
          "skills": []
        }
      ],
      "pieceStatsByTemplateId": {
        "red-soldier": {
          "maxHp": 100,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-soldier": {
          "maxHp": 100,
          "attack": 18,
          "defense": 6,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-shot": {
          "id": "basic-shot",
          "name": "Basic Shot",
          "description": "Simple attack used as 普通技能。",
          "kind": "active",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "isChargeSkill": false,
          "chargeCost": 0,
          "powerMultiplier": 1
        },
        "charge-burst": {
          "id": "charge-burst",
          "name": "Charge Burst",
          "description": "Consumes charge points to deal high damage.",
          "kind": "active",
          "cooldownTurns": 1,
          "maxCharges": 3,
          "isChargeSkill": true,
          "chargeCost": 1,
          "powerMultiplier": 2
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "2",
        "turnNumber": 4,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "jmo59",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771348391871,
    "maxPlayers": 2,
    "players": [
      {
        "id": "882f551d-de72-4341-9e8f-21664450f15e",
        "name": "1",
        "joinedAt": 1771348391915
      },
      {
        "id": "1e4c9586-c0c1-4af5-8d95-9f290ed77a8c",
        "name": "2",
        "joinedAt": 1771348398042
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-soldier",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "x": 1,
          "y": 1,
          "skills": []
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-soldier",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "x": 6,
          "y": 4,
          "skills": []
        }
      ],
      "pieceStatsByTemplateId": {
        "red-soldier": {
          "maxHp": 100,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-soldier": {
          "maxHp": 100,
          "attack": 18,
          "defense": 6,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-shot": {
          "id": "basic-shot",
          "name": "Basic Shot",
          "description": "Simple attack used as 普通技能。",
          "kind": "active",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "isChargeSkill": false,
          "chargeCost": 0,
          "powerMultiplier": 1
        },
        "charge-burst": {
          "id": "charge-burst",
          "name": "Charge Burst",
          "description": "Consumes charge points to deal high damage.",
          "kind": "active",
          "cooldownTurns": 1,
          "maxCharges": 3,
          "isChargeSkill": true,
          "chargeCost": 1,
          "powerMultiplier": 2
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "1",
        "turnNumber": 5,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "kovpo",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771348847044,
    "maxPlayers": 2,
    "players": [
      {
        "id": "e2888757-a839-4c85-b27e-62440acd3740",
        "name": "1",
        "joinedAt": 1771348847085
      },
      {
        "id": "bd4b917e-2879-4c10-93c7-d4a542d7e753",
        "name": "2",
        "joinedAt": 1771348851572
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-soldier",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "x": 1,
          "y": 1,
          "skills": []
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-soldier",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "x": 6,
          "y": 4,
          "skills": []
        }
      ],
      "pieceStatsByTemplateId": {
        "red-soldier": {
          "maxHp": 100,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-soldier": {
          "maxHp": 100,
          "attack": 18,
          "defense": 6,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-shot": {
          "id": "basic-shot",
          "name": "Basic Shot",
          "description": "Simple attack used as 普通技能。",
          "kind": "active",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "isChargeSkill": false,
          "chargeCost": 0,
          "powerMultiplier": 1
        },
        "charge-burst": {
          "id": "charge-burst",
          "name": "Charge Burst",
          "description": "Consumes charge points to deal high damage.",
          "kind": "active",
          "cooldownTurns": 1,
          "maxCharges": 3,
          "isChargeSkill": true,
          "chargeCost": 1,
          "powerMultiplier": 2
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "2",
        "turnNumber": 4,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "vzmck",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771352234373,
    "maxPlayers": 2,
    "players": [
      {
        "id": "0c861491-dafd-43dd-91e7-d2df4812abd6",
        "name": "1",
        "joinedAt": 1771352234482
      },
      {
        "id": "48b57c28-a5b5-49e8-b1bc-80623d5ca6db",
        "name": "2",
        "joinedAt": 1771352248264
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-soldier",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "x": 1,
          "y": 1,
          "skills": []
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-soldier",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "x": 6,
          "y": 4,
          "skills": []
        }
      ],
      "pieceStatsByTemplateId": {
        "red-soldier": {
          "maxHp": 100,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-soldier": {
          "maxHp": 100,
          "attack": 18,
          "defense": 6,
          "moveRange": 3
        },
        "red-mage": {
          "maxHp": 80,
          "attack": 25,
          "defense": 3,
          "moveRange": 2
        },
        "blue-mage": {
          "maxHp": 80,
          "attack": 22,
          "defense": 4,
          "moveRange": 2
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "heal": {
          "id": "heal",
          "name": "治疗术",
          "description": "恢复自身或盟友的生命值",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const allies = getAllAlliesInRange(context, context.skill.areaSize || 2)\n  return {\n    heal: 30,\n    effects: allies.map(a => ({\n      type: \"heal\",\n      value: 30,\n      target: \"allies\",\n      description: \"恢复30点生命值\"\n    })),\n    message: \"治疗术生效，恢复生命值\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "heal",
              "value": 30,
              "target": "allies",
              "description": "恢复30点生命值"
            }
          ],
          "range": "area",
          "areaSize": 2,
          "requiresTarget": false
        },
        "shield": {
          "id": "shield",
          "name": "护盾术",
          "description": "为自身提供护盾，吸收伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"shield\",\n      value: 50,\n      target: \"self\",\n      duration: 3,\n      description: \"获得50点护盾，持续3回合\"\n    }],\n    message: \"护盾术生效，获得护盾\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "shield",
              "value": 50,
              "target": "self",
              "duration": 3,
              "description": "获得50点护盾，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "传送术",
          "description": "瞬间移动到指定位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"teleport\",\n      value: 5,\n      target: \"self\",\n      description: \"传送到5格范围内\"\n    }],\n    message: \"传送术生效，瞬间移动\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "teleport",
              "value": 5,
              "target": "self",
              "description": "传送到5格范围内"
            }
          ],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击强化",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"buff\",\n      value: 10,\n      target: \"self\",\n      duration: 3,\n      description: \"攻击力提升10点，持续3回合\"\n    }],\n    message: \"攻击强化生效，攻击力提升\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "buff",
              "value": 10,
              "target": "self",
              "duration": 3,
              "description": "攻击力提升10点，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "debuff-defense": {
          "id": "debuff-defense",
          "name": "防御削弱",
          "description": "降低目标防御力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  if (!context.target) {\n    return {\n      message: \"没有目标\",\n      success: false\n    }\n  }\n  return {\n    effects: [{\n      type: \"debuff\",\n      value: 5,\n      target: \"enemy\",\n      duration: 2,\n      description: \"防御力降低5点，持续2回合\"\n    }],\n    message: \"防御削弱生效，降低目标防御力\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "debuff",
              "value": 5,
              "target": "enemy",
              "duration": 2,
              "description": "防御力降低5点，持续2回合"
            }
          ],
          "range": "single",
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "1",
        "turnNumber": 3,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "w953m",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771352976299,
    "maxPlayers": 2,
    "players": [
      {
        "id": "38b0619f-a3ce-442d-9efd-4f79559926e2",
        "name": "1",
        "joinedAt": 1771352976351
      },
      {
        "id": "c7cf4c8b-cf23-4a58-9cf8-5d85b5142748",
        "name": "2",
        "joinedAt": 1771352986381
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "lncoq",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771353468512,
    "maxPlayers": 2,
    "players": [
      {
        "id": "6ff85e49-e1a1-442e-a3f4-0fe39c46e877",
        "name": "1",
        "joinedAt": 1771353468564
      },
      {
        "id": "a08c4fd5-ca4b-4964-91ed-cfc861b739d4",
        "name": "2",
        "joinedAt": 1771353486398
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "rjvzc",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771353821916,
    "maxPlayers": 2,
    "players": [
      {
        "id": "ff6234ce-6c10-4022-8beb-e1b3e444f490",
        "name": "1",
        "joinedAt": 1771353821956
      },
      {
        "id": "1af6860f-620c-47bf-9d5a-ec5b3c54127f",
        "name": "2",
        "joinedAt": 1771353830275
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "d22lx",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771354500659,
    "maxPlayers": 2,
    "players": [
      {
        "id": "4ddb87c2-c289-4e79-93f0-250ad0937c63",
        "name": "1",
        "joinedAt": 1771354500717
      },
      {
        "id": "fcae56e1-cc0f-471f-860a-a26883c34f14",
        "name": "2",
        "joinedAt": 1771354508715
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "d8at8",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771355683679,
    "maxPlayers": 2,
    "players": [
      {
        "id": "9ca52e5f-44b4-4702-aaa5-6d1602ce14ce",
        "name": "1",
        "joinedAt": 1771355683726
      },
      {
        "id": "0ee4552a-a36a-47c4-89da-3619c5698b39",
        "name": "2",
        "joinedAt": 1771355689950
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "v2bb6",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771355841786,
    "maxPlayers": 2,
    "players": [
      {
        "id": "11c7e093-57d8-4fc6-a3e0-f0a9ac208d4c",
        "name": "1",
        "joinedAt": 1771355841831
      },
      {
        "id": "36103850-7411-44dc-91b6-fb920c782276",
        "name": "2",
        "joinedAt": 1771355848972
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-warrior",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 1,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "1-2",
          "templateId": "red-mage",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "1-3",
          "templateId": "red-archer",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 1,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-warrior",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 6,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "2-2",
          "templateId": "blue-mage",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 5,
          "y": 4,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "2-3",
          "templateId": "blue-archer",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 6,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "heal": {
          "id": "heal",
          "name": "治疗术",
          "description": "恢复自身或盟友的生命值",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const allies = getAllAlliesInRange(context, context.skill.areaSize || 2)\n  return {\n    heal: 30,\n    effects: allies.map(a => ({\n      type: \"heal\",\n      value: 30,\n      target: \"allies\",\n      description: \"恢复30点生命值\"\n    })),\n    message: \"治疗术生效，恢复生命值\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "heal",
              "value": 30,
              "target": "allies",
              "description": "恢复30点生命值"
            }
          ],
          "range": "area",
          "areaSize": 2,
          "requiresTarget": false
        },
        "shield": {
          "id": "shield",
          "name": "护盾术",
          "description": "为自身提供护盾，吸收伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"shield\",\n      value: 50,\n      target: \"self\",\n      duration: 3,\n      description: \"获得50点护盾，持续3回合\"\n    }],\n    message: \"护盾术生效，获得护盾\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "shield",
              "value": 50,
              "target": "self",
              "duration": 3,
              "description": "获得50点护盾，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "传送术",
          "description": "瞬间移动到指定位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"teleport\",\n      value: 5,\n      target: \"self\",\n      description: \"传送到5格范围内\"\n    }],\n    message: \"传送术生效，瞬间移动\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "teleport",
              "value": 5,
              "target": "self",
              "description": "传送到5格范围内"
            }
          ],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击强化",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"buff\",\n      value: 10,\n      target: \"self\",\n      duration: 3,\n      description: \"攻击力提升10点，持续3回合\"\n    }],\n    message: \"攻击强化生效，攻击力提升\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "buff",
              "value": 10,
              "target": "self",
              "duration": 3,
              "description": "攻击力提升10点，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "debuff-defense": {
          "id": "debuff-defense",
          "name": "防御削弱",
          "description": "降低目标防御力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  if (!context.target) {\n    return {\n      message: \"没有目标\",\n      success: false\n    }\n  }\n  return {\n    effects: [{\n      type: \"debuff\",\n      value: 5,\n      target: \"enemy\",\n      duration: 2,\n      description: \"防御力降低5点，持续2回合\"\n    }],\n    message: \"防御削弱生效，降低目标防御力\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "debuff",
              "value": 5,
              "target": "enemy",
              "duration": 2,
              "description": "防御力降低5点，持续2回合"
            }
          ],
          "range": "single",
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "2",
        "turnNumber": 2,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "jbnqs",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771356071700,
    "maxPlayers": 2,
    "players": [
      {
        "id": "63a5e828-fb7f-4622-bcd6-e8d269c69cf5",
        "name": "1",
        "joinedAt": 1771356071751
      },
      {
        "id": "8dc34615-8c60-4c54-9b8c-7a93f72e5cfd",
        "name": "2",
        "joinedAt": 1771356077301
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "v0be6",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771356346658,
    "maxPlayers": 2,
    "players": [
      {
        "id": "e2fb7fbb-866f-408a-8541-9a736d66d8d4",
        "name": "1",
        "joinedAt": 1771356346707
      },
      {
        "id": "f7c39cd3-d913-45c6-82cb-aa031ae78097",
        "name": "2",
        "joinedAt": 1771356355336
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "fifth",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771356567075,
    "maxPlayers": 2,
    "players": [
      {
        "id": "3d9a64e0-f762-4201-834d-35a8c6d9f5e3",
        "name": "1",
        "joinedAt": 1771356567130
      },
      {
        "id": "0487f77b-8b1a-4b5e-9532-ff58e367a0e5",
        "name": "2",
        "joinedAt": 1771356573801
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "6lorb",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771356846441,
    "maxPlayers": 2,
    "players": [
      {
        "id": "b39763d5-8119-4746-a2a4-90cefd05af9f",
        "name": "1",
        "joinedAt": 1771356846478,
        "selectedPieces": [
          {
            "templateId": "red-warrior",
            "faction": "red"
          },
          {
            "templateId": "red-mage",
            "faction": "red"
          }
        ]
      },
      {
        "id": "b10e1408-198e-41f1-8fae-6d6e69dde885",
        "name": "2",
        "joinedAt": 1771356853393,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ]
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "2-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 6,
          "y": 4,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "2-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 5,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "heal": {
          "id": "heal",
          "name": "治疗术",
          "description": "恢复自身或盟友的生命值",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const allies = getAllAlliesInRange(context, context.skill.areaSize || 2)\n  return {\n    heal: 30,\n    effects: allies.map(a => ({\n      type: \"heal\",\n      value: 30,\n      target: \"allies\",\n      description: \"恢复30点生命值\"\n    })),\n    message: \"治疗术生效，恢复生命值\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "heal",
              "value": 30,
              "target": "allies",
              "description": "恢复30点生命值"
            }
          ],
          "range": "area",
          "areaSize": 2,
          "requiresTarget": false
        },
        "shield": {
          "id": "shield",
          "name": "护盾术",
          "description": "为自身提供护盾，吸收伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"shield\",\n      value: 50,\n      target: \"self\",\n      duration: 3,\n      description: \"获得50点护盾，持续3回合\"\n    }],\n    message: \"护盾术生效，获得护盾\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "shield",
              "value": 50,
              "target": "self",
              "duration": 3,
              "description": "获得50点护盾，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "传送术",
          "description": "瞬间移动到指定位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"teleport\",\n      value: 5,\n      target: \"self\",\n      description: \"传送到5格范围内\"\n    }],\n    message: \"传送术生效，瞬间移动\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "teleport",
              "value": 5,
              "target": "self",
              "description": "传送到5格范围内"
            }
          ],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击强化",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"buff\",\n      value: 10,\n      target: \"self\",\n      duration: 3,\n      description: \"攻击力提升10点，持续3回合\"\n    }],\n    message: \"攻击强化生效，攻击力提升\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "buff",
              "value": 10,
              "target": "self",
              "duration": 3,
              "description": "攻击力提升10点，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "debuff-defense": {
          "id": "debuff-defense",
          "name": "防御削弱",
          "description": "降低目标防御力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  if (!context.target) {\n    return {\n      message: \"没有目标\",\n      success: false\n    }\n  }\n  return {\n    effects: [{\n      type: \"debuff\",\n      value: 5,\n      target: \"enemy\",\n      duration: 2,\n      description: \"防御力降低5点，持续2回合\"\n    }],\n    message: \"防御削弱生效，降低目标防御力\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "debuff",
              "value": 5,
              "target": "enemy",
              "duration": 2,
              "description": "防御力降低5点，持续2回合"
            }
          ],
          "range": "single",
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "1",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "jujea",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771357268201,
    "maxPlayers": 2,
    "players": [
      {
        "id": "1e96e544-3059-415a-ac61-73eae1cc763c",
        "name": "1",
        "joinedAt": 1771357268261,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "64336bac-1b8c-43bc-ac13-20c659ac3861",
        "name": "2",
        "joinedAt": 1771357276729,
        "selectedPieces": [
          {
            "templateId": "red-warrior",
            "faction": "red"
          },
          {
            "templateId": "red-mage",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-warrior",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 1,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "1-2",
          "templateId": "red-mage",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "heal": {
          "id": "heal",
          "name": "治疗术",
          "description": "恢复自身或盟友的生命值",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const allies = getAllAlliesInRange(context, context.skill.areaSize || 2)\n  return {\n    heal: 30,\n    effects: allies.map(a => ({\n      type: \"heal\",\n      value: 30,\n      target: \"allies\",\n      description: \"恢复30点生命值\"\n    })),\n    message: \"治疗术生效，恢复生命值\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "heal",
              "value": 30,
              "target": "allies",
              "description": "恢复30点生命值"
            }
          ],
          "range": "area",
          "areaSize": 2,
          "requiresTarget": false
        },
        "shield": {
          "id": "shield",
          "name": "护盾术",
          "description": "为自身提供护盾，吸收伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"shield\",\n      value: 50,\n      target: \"self\",\n      duration: 3,\n      description: \"获得50点护盾，持续3回合\"\n    }],\n    message: \"护盾术生效，获得护盾\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "shield",
              "value": 50,
              "target": "self",
              "duration": 3,
              "description": "获得50点护盾，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "传送术",
          "description": "瞬间移动到指定位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"teleport\",\n      value: 5,\n      target: \"self\",\n      description: \"传送到5格范围内\"\n    }],\n    message: \"传送术生效，瞬间移动\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "teleport",
              "value": 5,
              "target": "self",
              "description": "传送到5格范围内"
            }
          ],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击强化",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"buff\",\n      value: 10,\n      target: \"self\",\n      duration: 3,\n      description: \"攻击力提升10点，持续3回合\"\n    }],\n    message: \"攻击强化生效，攻击力提升\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "buff",
              "value": 10,
              "target": "self",
              "duration": 3,
              "description": "攻击力提升10点，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "debuff-defense": {
          "id": "debuff-defense",
          "name": "防御削弱",
          "description": "降低目标防御力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  if (!context.target) {\n    return {\n      message: \"没有目标\",\n      success: false\n    }\n  }\n  return {\n    effects: [{\n      type: \"debuff\",\n      value: 5,\n      target: \"enemy\",\n      duration: 2,\n      description: \"防御力降低5点，持续2回合\"\n    }],\n    message: \"防御削弱生效，降低目标防御力\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "debuff",
              "value": 5,
              "target": "enemy",
              "duration": 2,
              "description": "防御力降低5点，持续2回合"
            }
          ],
          "range": "single",
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "1",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "vxuqr",
    "name": "1 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771357539995,
    "maxPlayers": 2,
    "players": [
      {
        "id": "d41d2a3d-82d3-49d8-b412-2077183769f8",
        "name": "1",
        "joinedAt": 1771357540049,
        "selectedPieces": [
          {
            "templateId": "red-warrior",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "0848ed73-a1dc-4609-a441-8c48a1f9fa4f",
        "name": "2",
        "joinedAt": 1771357546992,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "mx5yo",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771357819459,
    "maxPlayers": 2,
    "players": [
      {
        "id": "49e4f8ec-aa9e-47f6-9c13-cb387b6865e6",
        "name": "1",
        "joinedAt": 1771357819502,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "4435ee6c-d5ef-47c0-b889-123d974b4e13",
        "name": "2",
        "joinedAt": 1771357830099,
        "selectedPieces": [
          {
            "templateId": "red-warrior",
            "faction": "red"
          },
          {
            "templateId": "red-mage",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-mage",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 1,
          "y": 1,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "1-2",
          "templateId": "red-archer",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "heal": {
          "id": "heal",
          "name": "治疗术",
          "description": "恢复自身或盟友的生命值",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const allies = getAllAlliesInRange(context, context.skill.areaSize || 2)\n  return {\n    heal: 30,\n    effects: allies.map(a => ({\n      type: \"heal\",\n      value: 30,\n      target: \"allies\",\n      description: \"恢复30点生命值\"\n    })),\n    message: \"治疗术生效，恢复生命值\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "heal",
              "value": 30,
              "target": "allies",
              "description": "恢复30点生命值"
            }
          ],
          "range": "area",
          "areaSize": 2,
          "requiresTarget": false
        },
        "shield": {
          "id": "shield",
          "name": "护盾术",
          "description": "为自身提供护盾，吸收伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"shield\",\n      value: 50,\n      target: \"self\",\n      duration: 3,\n      description: \"获得50点护盾，持续3回合\"\n    }],\n    message: \"护盾术生效，获得护盾\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "shield",
              "value": 50,
              "target": "self",
              "duration": 3,
              "description": "获得50点护盾，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "传送术",
          "description": "瞬间移动到指定位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"teleport\",\n      value: 5,\n      target: \"self\",\n      description: \"传送到5格范围内\"\n    }],\n    message: \"传送术生效，瞬间移动\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "teleport",
              "value": 5,
              "target": "self",
              "description": "传送到5格范围内"
            }
          ],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击强化",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"buff\",\n      value: 10,\n      target: \"self\",\n      duration: 3,\n      description: \"攻击力提升10点，持续3回合\"\n    }],\n    message: \"攻击强化生效，攻击力提升\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "buff",
              "value": 10,
              "target": "self",
              "duration": 3,
              "description": "攻击力提升10点，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "debuff-defense": {
          "id": "debuff-defense",
          "name": "防御削弱",
          "description": "降低目标防御力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  if (!context.target) {\n    return {\n      message: \"没有目标\",\n      success: false\n    }\n  }\n  return {\n    effects: [{\n      type: \"debuff\",\n      value: 5,\n      target: \"enemy\",\n      duration: 2,\n      description: \"防御力降低5点，持续2回合\"\n    }],\n    message: \"防御削弱生效，降低目标防御力\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "debuff",
              "value": 5,
              "target": "enemy",
              "duration": 2,
              "description": "防御力降低5点，持续2回合"
            }
          ],
          "range": "single",
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "1",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "y9p5o",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771358015161,
    "maxPlayers": 2,
    "players": [
      {
        "id": "0e5480fc-b82a-4195-9312-d8b8c38bca0d",
        "name": "1",
        "joinedAt": 1771358015206,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "f4f8e1c6-bfca-4933-a3bf-c27d939af7d2",
        "name": "2",
        "joinedAt": 1771358023268,
        "selectedPieces": [
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          },
          {
            "templateId": "blue-mage",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-mage",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 1,
          "y": 1,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "1-2",
          "templateId": "red-archer",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "heal": {
          "id": "heal",
          "name": "治疗术",
          "description": "恢复自身或盟友的生命值",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const allies = getAllAlliesInRange(context, context.skill.areaSize || 2)\n  return {\n    heal: 30,\n    effects: allies.map(a => ({\n      type: \"heal\",\n      value: 30,\n      target: \"allies\",\n      description: \"恢复30点生命值\"\n    })),\n    message: \"治疗术生效，恢复生命值\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "heal",
              "value": 30,
              "target": "allies",
              "description": "恢复30点生命值"
            }
          ],
          "range": "area",
          "areaSize": 2,
          "requiresTarget": false
        },
        "shield": {
          "id": "shield",
          "name": "护盾术",
          "description": "为自身提供护盾，吸收伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"shield\",\n      value: 50,\n      target: \"self\",\n      duration: 3,\n      description: \"获得50点护盾，持续3回合\"\n    }],\n    message: \"护盾术生效，获得护盾\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "shield",
              "value": 50,
              "target": "self",
              "duration": 3,
              "description": "获得50点护盾，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "传送术",
          "description": "瞬间移动到指定位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"teleport\",\n      value: 5,\n      target: \"self\",\n      description: \"传送到5格范围内\"\n    }],\n    message: \"传送术生效，瞬间移动\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "teleport",
              "value": 5,
              "target": "self",
              "description": "传送到5格范围内"
            }
          ],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击强化",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"buff\",\n      value: 10,\n      target: \"self\",\n      duration: 3,\n      description: \"攻击力提升10点，持续3回合\"\n    }],\n    message: \"攻击强化生效，攻击力提升\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "buff",
              "value": 10,
              "target": "self",
              "duration": 3,
              "description": "攻击力提升10点，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "debuff-defense": {
          "id": "debuff-defense",
          "name": "防御削弱",
          "description": "降低目标防御力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  if (!context.target) {\n    return {\n      message: \"没有目标\",\n      success: false\n    }\n  }\n  return {\n    effects: [{\n      type: \"debuff\",\n      value: 5,\n      target: \"enemy\",\n      duration: 2,\n      description: \"防御力降低5点，持续2回合\"\n    }],\n    message: \"防御削弱生效，降低目标防御力\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "debuff",
              "value": 5,
              "target": "enemy",
              "duration": 2,
              "description": "防御力降低5点，持续2回合"
            }
          ],
          "range": "single",
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "1",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "4q7zf",
    "name": "1 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771358148526,
    "maxPlayers": 2,
    "players": [
      {
        "id": "cb5f1a10-12c5-4ca3-8a34-4ffa640ce230",
        "name": "1",
        "joinedAt": 1771358148576,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-archer",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "2c55e41c-8ce2-42c9-b38c-ce4439130383",
        "name": "2",
        "joinedAt": 1771358158128,
        "selectedPieces": [
          {
            "templateId": "red-warrior",
            "faction": "red"
          },
          {
            "templateId": "red-mage",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "arena-8x6",
        "name": "小型竞技场",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "arena-8x6-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "spawn"
            }
          },
          {
            "id": "arena-8x6-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": false,
              "type": "cover"
            }
          },
          {
            "id": "arena-8x6-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": true,
              "type": "hole"
            }
          },
          {
            "id": "arena-8x6-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "arena-8x6-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "arena-8x6-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "1-1",
          "templateId": "red-warrior",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 0,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 1,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "1-2",
          "templateId": "red-mage",
          "ownerPlayerId": "1",
          "faction": "red",
          "currentHp": 0,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "2-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 6,
          "y": 4,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "2-2",
          "templateId": "blue-archer",
          "ownerPlayerId": "2",
          "faction": "blue",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 2,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "heal": {
          "id": "heal",
          "name": "治疗术",
          "description": "恢复自身或盟友的生命值",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const allies = getAllAlliesInRange(context, context.skill.areaSize || 2)\n  return {\n    heal: 30,\n    effects: allies.map(a => ({\n      type: \"heal\",\n      value: 30,\n      target: \"allies\",\n      description: \"恢复30点生命值\"\n    })),\n    message: \"治疗术生效，恢复生命值\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "heal",
              "value": 30,
              "target": "allies",
              "description": "恢复30点生命值"
            }
          ],
          "range": "area",
          "areaSize": 2,
          "requiresTarget": false
        },
        "shield": {
          "id": "shield",
          "name": "护盾术",
          "description": "为自身提供护盾，吸收伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"shield\",\n      value: 50,\n      target: \"self\",\n      duration: 3,\n      description: \"获得50点护盾，持续3回合\"\n    }],\n    message: \"护盾术生效，获得护盾\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "shield",
              "value": 50,
              "target": "self",
              "duration": 3,
              "description": "获得50点护盾，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "传送术",
          "description": "瞬间移动到指定位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"teleport\",\n      value: 5,\n      target: \"self\",\n      description: \"传送到5格范围内\"\n    }],\n    message: \"传送术生效，瞬间移动\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "teleport",
              "value": 5,
              "target": "self",
              "description": "传送到5格范围内"
            }
          ],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击强化",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  return {\n    effects: [{\n      type: \"buff\",\n      value: 10,\n      target: \"self\",\n      duration: 3,\n      description: \"攻击力提升10点，持续3回合\"\n    }],\n    message: \"攻击强化生效，攻击力提升\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "buff",
              "value": 10,
              "target": "self",
              "duration": 3,
              "description": "攻击力提升10点，持续3回合"
            }
          ],
          "range": "self",
          "requiresTarget": false
        },
        "debuff-defense": {
          "id": "debuff-defense",
          "name": "防御削弱",
          "description": "降低目标防御力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 3,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  if (!context.target) {\n    return {\n      message: \"没有目标\",\n      success: false\n    }\n  }\n  return {\n    effects: [{\n      type: \"debuff\",\n      value: 5,\n      target: \"enemy\",\n      duration: 2,\n      description: \"防御力降低5点，持续2回合\"\n    }],\n    message: \"防御削弱生效，降低目标防御力\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "debuff",
              "value": 5,
              "target": "enemy",
              "duration": 2,
              "description": "防御力降低5点，持续2回合"
            }
          ],
          "range": "single",
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "1",
          "chargePoints": 0
        },
        {
          "playerId": "2",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "1",
        "turnNumber": 3,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "c1ytv",
    "name": "admin 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771361377727,
    "maxPlayers": 2,
    "players": [
      {
        "id": "0da07913-0bff-4910-b013-5f24b883d22e",
        "name": "admin",
        "joinedAt": 1771361378040
      },
      {
        "id": "ea5d9763-8b5c-411d-8ea0-adc792813021",
        "name": "Longaadream",
        "joinedAt": 1771361398228
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "ufgnp",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771361421435,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771361421503,
        "selectedPieces": [
          {
            "templateId": "red-archer",
            "faction": "red"
          },
          {
            "templateId": "red-mage",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771361426917,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 5,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 5,
          "y": 1,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 6,
          "y": 1,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 3,
          "y": 0,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771360858632_9522",
        "turnNumber": 2,
        "phase": "action",
        "actions": {
          "hasMoved": true,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "sxlo6",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771362633381,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771362633520,
        "selectedPieces": [
          {
            "templateId": "red-archer",
            "faction": "red"
          },
          {
            "templateId": "red-warrior",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771362642042,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-warrior",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 5,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 6,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-3",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 5,
          "y": 3,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-4",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 5,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "ma8zc",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771362761790,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771362762037,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771362774696,
        "selectedPieces": [
          {
            "templateId": "blue-archer",
            "faction": "blue"
          },
          {
            "templateId": "blue-mage",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 3,
          "y": 4,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 3,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-3",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 4,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-4",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 1,
          "y": 2,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771360858632_9522",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "fyaxb",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771362951137,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771362951283,
        "selectedPieces": [
          {
            "templateId": "blue-archer",
            "faction": "blue"
          },
          {
            "templateId": "blue-mage",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771362959545,
        "selectedPieces": [
          {
            "templateId": "red-archer",
            "faction": "red"
          },
          {
            "templateId": "red-mage",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 2,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 4,
          "y": 2,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 1,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 4,
          "y": 3,
          "skills": [
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "对目标造成基础伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  return {\n    damage: damage,\n    message: \"造成 \" + damage + \" 点伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1,
              "target": "enemy",
              "description": "造成100%攻击力的伤害"
            }
          ],
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "发射火球对敌人造成范围伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  const damage = context.piece.attack * context.skill.powerMultiplier\n  const targets = getAllEnemiesInRange(context, context.skill.areaSize || 3)\n  return {\n    damage: damage,\n    effects: targets.map(t => ({\n      type: \"damage\",\n      value: damage,\n      target: \"enemy\",\n      description: \"对 \" + t.templateId + \" 造成 \" + damage + \" 点伤害\"\n    })),\n    message: \"火球爆炸，对范围内敌人造成伤害\",\n    success: true\n  }\n}",
          "effects": [
            {
              "type": "damage",
              "value": 1.5,
              "target": "all-enemies",
              "description": "对范围内所有敌人造成150%攻击力的伤害"
            }
          ],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771360858632_9522",
        "turnNumber": 5,
        "phase": "action",
        "actions": {
          "hasMoved": true,
          "hasUsedBasicSkill": true,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "me0ct",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771430929220,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771430929319,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771430941651,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-warrior",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 2,
          "y": 3,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 3,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-3",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 1,
          "y": 3,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-4",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 4,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "Teleport",
          "description": "Instantly move to target location",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "Fireball",
          "description": "Fireball attack",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "Basic Attack",
          "description": "Basic attack on target",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "Shield",
          "description": "Create a shield",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "Attack Buff",
          "description": "Buff attack power",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "oczqz",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771432059614,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771432059805,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771432065876,
        "selectedPieces": [
          {
            "templateId": "blue-archer",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 1,
          "y": 3,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 2,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 3,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 3,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "Teleport",
          "description": "Instantly move to target location",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "Fireball",
          "description": "Fireball attack",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "Basic Attack",
          "description": "Basic attack on target",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "Shield",
          "description": "Create a shield",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "Attack Buff",
          "description": "Buff attack power",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771360858632_9522",
        "turnNumber": 3,
        "phase": "action",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "w5wkl",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771432669012,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771432669062,
        "selectedPieces": [
          {
            "templateId": "red-archer",
            "faction": "red"
          },
          {
            "templateId": "red-warrior",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771432674400,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 4,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 4,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 1,
          "y": 1,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 6,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 2,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "gmxhu",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771433032410,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771433032454,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-archer",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771433038424,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 1,
          "y": 1,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 6,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 1,
          "y": 1,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771360858632_9522",
        "turnNumber": 2,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "sgdvs",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771433435789,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771433435948,
        "selectedPieces": [
          {
            "templateId": "blue-archer",
            "faction": "blue"
          },
          {
            "templateId": "blue-mage",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771433442813,
        "selectedPieces": [
          {
            "templateId": "blue-archer",
            "faction": "blue"
          },
          {
            "templateId": "blue-mage",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 6,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 6,
          "y": 4,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 1,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 4,
          "y": 1,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 2,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "xvajq",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771433673741,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771433673905,
        "selectedPieces": [
          {
            "templateId": "blue-archer",
            "faction": "blue"
          },
          {
            "templateId": "blue-mage",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771433684030,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-warrior",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 5,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 3,
          "y": 4,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 2,
          "y": 2,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 5,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771360858632_9522",
        "turnNumber": 2,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "efaht",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771433900443,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771433900572,
        "selectedPieces": [
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          },
          {
            "templateId": "blue-mage",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771433913285,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 3,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 1,
          "y": 2,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 6,
          "y": 4,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 5,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 2,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "rn1hq",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771434554262,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771434554316,
        "selectedPieces": [
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          },
          {
            "templateId": "blue-archer",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771434563962,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 3,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 6,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 60,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 2,
          "y": 4,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 5,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 1,
        "phase": "action",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": true,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "njm16",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771435047265,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771435047424,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771435053343,
        "selectedPieces": [
          {
            "templateId": "blue-archer",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 3,
          "y": 3,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 3,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 5,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 4,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 2,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "nijcr",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771435652142,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771435652288,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771435662012,
        "selectedPieces": [
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          },
          {
            "templateId": "blue-archer",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 20,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 3,
          "y": 1,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 2,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 0,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 1,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771360858632_9522",
        "turnNumber": 9,
        "phase": "action",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "vcfav",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771436094140,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771436094213,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771436100314,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 0,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 3,
          "y": 2,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 0,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 4,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 30,
          "defense": 3,
          "moveRange": 2,
          "x": 5,
          "y": 1,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 25,
          "defense": 5,
          "moveRange": 4,
          "x": 3,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "appb6",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771436236428,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771436236480,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-archer",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771436244439,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 6,
          "y": 4,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 100,
          "maxHp": 100,
          "attack": 22,
          "defense": 6,
          "moveRange": 4,
          "x": 5,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 80,
          "maxHp": 80,
          "attack": 28,
          "defense": 4,
          "moveRange": 2,
          "x": 5,
          "y": 1,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 120,
          "maxHp": 120,
          "attack": 20,
          "defense": 8,
          "moveRange": 3,
          "x": 1,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "kcqax",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771436363557,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771436364230,
        "selectedPieces": [
          {
            "templateId": "red-warrior",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771436370490,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-warrior",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 6,
          "maxHp": 6,
          "attack": 1,
          "defense": 0,
          "moveRange": 3,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 4,
          "maxHp": 4,
          "attack": 2,
          "defense": 0,
          "moveRange": 4,
          "x": 3,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 2,
          "maxHp": 3,
          "attack": 2,
          "defense": 0,
          "moveRange": 2,
          "x": 5,
          "y": 1,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 6,
          "maxHp": 6,
          "attack": 1,
          "defense": 0,
          "moveRange": 3,
          "x": 3,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771360858632_9522",
        "turnNumber": 1,
        "phase": "action",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": true,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "xfclf",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771436567005,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771436567038,
        "selectedPieces": [
          {
            "templateId": "red-warrior",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771436573088,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-archer",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 4,
          "maxHp": 6,
          "attack": 1,
          "defense": 0,
          "moveRange": 3,
          "x": 5,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 4,
          "maxHp": 4,
          "attack": 22,
          "defense": 0,
          "moveRange": 4,
          "x": 6,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 0,
          "maxHp": 3,
          "attack": 2,
          "defense": 0,
          "moveRange": 2,
          "x": 4,
          "y": 4,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 4,
          "maxHp": 4,
          "attack": 12,
          "defense": 0,
          "moveRange": 4,
          "x": 5,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "teleport": {
          "id": "teleport",
          "name": "传送",
          "description": "传送到目标位置",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对范围内多个目标造成伤害",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) { return { message: 'Fireball', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); const areaSize = skillDef.areaSize || 3; return { description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damage + \"点伤害（相当于攻击力150%）\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "普通攻击",
          "description": "对单个目标造成伤害",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Basic attack', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const damage = Math.round(piece.attack * skillDef.powerMultiplier); return { description: \"对单个目标造成\" + damage + \"点伤害\", expectedValues: { damage } }; }",
          "effects": [],
          "range": "single",
          "requiresTarget": true
        },
        "shield": {
          "id": "shield",
          "name": "护盾",
          "description": "为自己创建一个护盾",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Shield activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const shieldValue = Math.round(piece.defense * 2); return { description: \"为自己创建一个吸收\" + shieldValue + \"点伤害的护盾\", expectedValues: {} }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击增益",
          "description": "提升自身攻击力",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Attack buff', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const buffValue = 10; return { description: \"提升自身攻击力\" + buffValue + \"点，持续3回合\", expectedValues: { buff: buffValue } }; }",
          "effects": [],
          "range": "self",
          "requiresTarget": false
        }
      },
      "players": [
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 3,
        "phase": "end",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": true,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "ezpud",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771437242708,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771437242902,
        "selectedPieces": [
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          },
          {
            "templateId": "blue-archer",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771437251484,
        "selectedPieces": [
          {
            "templateId": "red-warrior",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 6,
          "maxHp": 6,
          "attack": 1,
          "defense": 0,
          "moveRange": 3,
          "x": 6,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "red",
          "currentHp": 4,
          "maxHp": 4,
          "attack": 2,
          "defense": 0,
          "moveRange": 4,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 6,
          "maxHp": 6,
          "attack": 1,
          "defense": 0,
          "moveRange": 3,
          "x": 5,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 4,
          "maxHp": 4,
          "attack": 2,
          "defense": 0,
          "moveRange": 4,
          "x": 4,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "arcane-burst": {
          "id": "arcane-burst",
          "name": "Arcane Burst",
          "description": "传送到目标位置，提升自身攻击力15点，对5格范围内的所有敌人造成相当于攻击力250%的伤害",
          "icon": "✨",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 3,
          "maxCharges": 1,
          "chargeCost": 1,
          "powerMultiplier": 2,
          "code": "function executeSkill(context) {\n  // 使用teleport函数进行传送\n  teleport();\n  \n  // 直接修改自身的攻击力（buff效果）\n  const buffValue = 15;\n  context.piece.attack += buffValue;\n  \n  // 直接修改范围内敌人的生命值（damage效果）\n  const damageValue = context.piece.attack * 2.5;\n  const enemies = select.getEnemiesInRange(5);\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return { \n    message: 'Arcane burst activated', \n    success: true \n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值和增益值\n  const buffValue = 15;\n  const damageValue = Math.round((piece.attack + buffValue) * 2.5); // 考虑增益后的攻击力\n  const areaSize = skillDef.areaSize || 5;\n  \n  return {\n    description: \"传送到目标位置，提升自身攻击力\" + buffValue + \"点，对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害\",\n    expectedValues: {\n      damage: damageValue,\n      buff: buffValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "arcane-combination": {
          "id": "arcane-combination",
          "name": "Arcane Combination",
          "description": "传送到目标位置，提升自身攻击力10点，对5格范围内的所有敌人造成50点伤害",
          "icon": "🌟",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 3,
          "maxCharges": 1,
          "chargeCost": 1,
          "powerMultiplier": 2,
          "code": "function executeSkill(context) {\n  // 使用teleport函数进行传送\n  teleport();\n  \n  // 直接修改自身的攻击力（buff效果）\n  const buffValue = 10;\n  context.piece.attack += buffValue;\n  \n  // 直接修改范围内敌人的生命值（damage效果）\n  const damageValue = 50;\n  const enemies = select.getEnemiesInRange(5);\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return { message: 'Arcane combination activated', success: true };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值和增益值\n  const buffValue = 10;\n  const damageValue = 50; // 固定伤害值\n  const areaSize = skillDef.areaSize || 5;\n  \n  return {\n    description: \"传送到目标位置，提升自身攻击力\" + buffValue + \"点，对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害\",\n    expectedValues: {\n      damage: damageValue,\n      buff: buffValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "选择最近的敌人，造成相当于攻击力100%的伤害",
          "icon": "⚔️",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  // 选择最近的敌人\n  const targetEnemy = select.getNearestEnemy();\n  if (!targetEnemy) {\n    return { message: '没有可攻击的敌人', success: false };\n  }\n  \n  // 计算伤害值\n  const damageValue = context.piece.attack * context.skill.powerMultiplier;\n  \n  // 直接修改敌人的生命值\n  targetEnemy.currentHp = Math.max(0, targetEnemy.currentHp - damageValue);\n  \n  return {\n    message: \"造成 \" + damageValue + \" 点伤害\",\n    success: true\n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值\n  const damageValue = Math.round(piece.attack * skillDef.powerMultiplier);\n  \n  return {\n    description: \"选择最近的敌人，造成\" + damageValue + \"点伤害（相当于攻击力100%）\",\n    expectedValues: {\n      damage: damageValue\n    }\n  };\n}",
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对3格范围内的所有敌人造成相当于攻击力150%的伤害",
          "icon": "🔥",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  // 计算伤害值\n  const damageValue = context.piece.attack * context.skill.powerMultiplier;\n  \n  // 选择3格内的所有敌人\n  const enemies = select.getEnemiesInRange(3);\n  if (enemies.length === 0) {\n    return { message: '范围内没有可攻击的敌人', success: false };\n  }\n  \n  // 直接修改每个敌人的生命值\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return {\n    message: \"火球爆炸，对范围内\" + enemies.length + \"个敌人造成\" + damageValue + \"点伤害\",\n    success: true\n  }\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值\n  const damageValue = Math.round(piece.attack * skillDef.powerMultiplier);\n  const areaSize = skillDef.areaSize || 3;\n  \n  return {\n    description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害（相当于攻击力150%）\",\n    expectedValues: {\n      damage: damageValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "Teleport",
          "description": "传送到目标位置，冷却2回合",
          "icon": "🚀",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "lq5mj",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771437529830,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771437529871,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771437540231,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 3,
          "maxHp": 3,
          "attack": 2,
          "defense": 0,
          "moveRange": 2,
          "x": 4,
          "y": 3,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 6,
          "maxHp": 6,
          "attack": 1,
          "defense": 0,
          "moveRange": 3,
          "x": 2,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 3,
          "maxHp": 3,
          "attack": 2,
          "defense": 0,
          "moveRange": 2,
          "x": 4,
          "y": 4,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "blue",
          "currentHp": 6,
          "maxHp": 6,
          "attack": 1,
          "defense": 0,
          "moveRange": 3,
          "x": 4,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "arcane-burst": {
          "id": "arcane-burst",
          "name": "Arcane Burst",
          "description": "传送到目标位置，提升自身攻击力15点，对5格范围内的所有敌人造成相当于攻击力250%的伤害",
          "icon": "✨",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 3,
          "maxCharges": 1,
          "chargeCost": 1,
          "powerMultiplier": 2,
          "code": "function executeSkill(context) {\n  // 使用teleport函数进行传送\n  teleport();\n  \n  // 直接修改自身的攻击力（buff效果）\n  const buffValue = 15;\n  context.piece.attack += buffValue;\n  \n  // 直接修改范围内敌人的生命值（damage效果）\n  const damageValue = context.piece.attack * 2.5;\n  const enemies = select.getEnemiesInRange(5);\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return { \n    message: 'Arcane burst activated', \n    success: true \n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值和增益值\n  const buffValue = 15;\n  const damageValue = Math.round((piece.attack + buffValue) * 2.5); // 考虑增益后的攻击力\n  const areaSize = skillDef.areaSize || 5;\n  \n  return {\n    description: \"传送到目标位置，提升自身攻击力\" + buffValue + \"点，对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害\",\n    expectedValues: {\n      damage: damageValue,\n      buff: buffValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "arcane-combination": {
          "id": "arcane-combination",
          "name": "Arcane Combination",
          "description": "传送到目标位置，提升自身攻击力10点，对5格范围内的所有敌人造成50点伤害",
          "icon": "🌟",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 3,
          "maxCharges": 1,
          "chargeCost": 1,
          "powerMultiplier": 2,
          "code": "function executeSkill(context) {\n  // 使用teleport函数进行传送\n  teleport();\n  \n  // 直接修改自身的攻击力（buff效果）\n  const buffValue = 10;\n  context.piece.attack += buffValue;\n  \n  // 直接修改范围内敌人的生命值（damage效果）\n  const damageValue = 50;\n  const enemies = select.getEnemiesInRange(5);\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return { message: 'Arcane combination activated', success: true };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值和增益值\n  const buffValue = 10;\n  const damageValue = 50; // 固定伤害值\n  const areaSize = skillDef.areaSize || 5;\n  \n  return {\n    description: \"传送到目标位置，提升自身攻击力\" + buffValue + \"点，对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害\",\n    expectedValues: {\n      damage: damageValue,\n      buff: buffValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "选择最近的敌人，造成相当于攻击力100%的伤害",
          "icon": "⚔️",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  // 选择最近的敌人\n  const targetEnemy = select.getNearestEnemy();\n  if (!targetEnemy) {\n    return { message: '没有可攻击的敌人', success: false };\n  }\n  \n  // 计算伤害值\n  const damageValue = context.piece.attack * context.skill.powerMultiplier;\n  \n  // 直接修改敌人的生命值\n  targetEnemy.currentHp = Math.max(0, targetEnemy.currentHp - damageValue);\n  \n  return {\n    message: \"造成 \" + damageValue + \" 点伤害\",\n    success: true\n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值\n  const damageValue = Math.round(piece.attack * skillDef.powerMultiplier);\n  \n  return {\n    description: \"选择最近的敌人，造成\" + damageValue + \"点伤害（相当于攻击力100%）\",\n    expectedValues: {\n      damage: damageValue\n    }\n  };\n}",
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对3格范围内的所有敌人造成相当于攻击力150%的伤害",
          "icon": "🔥",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  // 计算伤害值\n  const damageValue = context.piece.attack * context.skill.powerMultiplier;\n  \n  // 选择3格内的所有敌人\n  const enemies = select.getEnemiesInRange(3);\n  if (enemies.length === 0) {\n    return { message: '范围内没有可攻击的敌人', success: false };\n  }\n  \n  // 直接修改每个敌人的生命值\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return {\n    message: \"火球爆炸，对范围内\" + enemies.length + \"个敌人造成\" + damageValue + \"点伤害\",\n    success: true\n  }\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值\n  const damageValue = Math.round(piece.attack * skillDef.powerMultiplier);\n  const areaSize = skillDef.areaSize || 3;\n  \n  return {\n    description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害（相当于攻击力150%）\",\n    expectedValues: {\n      damage: damageValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "Teleport",
          "description": "传送到目标位置，冷却2回合",
          "icon": "🚀",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 1,
        "phase": "start",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": false,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "ephun",
    "name": "admin 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771438036010,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771438036173
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771438039805
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "3lsmr",
    "name": "admin 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771438444373,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771438444410
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771438448616
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "piqyd",
    "name": "admin 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771438590958,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771438590985,
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771438600437,
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "b4huu",
    "name": "admin 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771438745395,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771438745421
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771438752728
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "f22tl",
    "name": "Longaadream 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771438983731,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771438983761,
        "faction": "blue",
        "selectedPieces": [
          {
            "templateId": "blue-warrior",
            "faction": "blue"
          },
          {
            "templateId": "blue-archer",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771438989369,
        "faction": "red",
        "selectedPieces": [
          {
            "templateId": "red-warrior",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ]
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "red-warrior",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 5,
          "maxHp": 6,
          "attack": 1,
          "defense": 0,
          "moveRange": 3,
          "x": 6,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 4,
          "maxHp": 4,
          "attack": 2,
          "defense": 0,
          "moveRange": 4,
          "x": 2,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-warrior",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 6,
          "maxHp": 6,
          "attack": 1,
          "defense": 0,
          "moveRange": 3,
          "x": 4,
          "y": 1,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "shield",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 3,
          "maxHp": 4,
          "attack": 2,
          "defense": 0,
          "moveRange": 4,
          "x": 6,
          "y": 3,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "arcane-burst": {
          "id": "arcane-burst",
          "name": "Arcane Burst",
          "description": "传送到目标位置，提升自身攻击力15点，对5格范围内的所有敌人造成相当于攻击力250%的伤害",
          "icon": "✨",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 3,
          "maxCharges": 1,
          "chargeCost": 1,
          "powerMultiplier": 2,
          "code": "function executeSkill(context) {\n  // 使用teleport函数进行传送\n  teleport();\n  \n  // 直接修改自身的攻击力（buff效果）\n  const buffValue = 15;\n  context.piece.attack += buffValue;\n  \n  // 直接修改范围内敌人的生命值（damage效果）\n  const damageValue = context.piece.attack * 2.5;\n  const enemies = select.getEnemiesInRange(5);\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return { \n    message: 'Arcane burst activated', \n    success: true \n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值和增益值\n  const buffValue = 15;\n  const damageValue = Math.round((piece.attack + buffValue) * 2.5); // 考虑增益后的攻击力\n  const areaSize = skillDef.areaSize || 5;\n  \n  return {\n    description: \"传送到目标位置，提升自身攻击力\" + buffValue + \"点，对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害\",\n    expectedValues: {\n      damage: damageValue,\n      buff: buffValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "arcane-combination": {
          "id": "arcane-combination",
          "name": "Arcane Combination",
          "description": "传送到目标位置，提升自身攻击力10点，对5格范围内的所有敌人造成50点伤害",
          "icon": "🌟",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 3,
          "maxCharges": 1,
          "chargeCost": 1,
          "powerMultiplier": 2,
          "code": "function executeSkill(context) {\n  // 使用teleport函数进行传送\n  teleport();\n  \n  // 直接修改自身的攻击力（buff效果）\n  const buffValue = 10;\n  context.piece.attack += buffValue;\n  \n  // 直接修改范围内敌人的生命值（damage效果）\n  const damageValue = 50;\n  const enemies = select.getEnemiesInRange(5);\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return { message: 'Arcane combination activated', success: true };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值和增益值\n  const buffValue = 10;\n  const damageValue = 50; // 固定伤害值\n  const areaSize = skillDef.areaSize || 5;\n  \n  return {\n    description: \"传送到目标位置，提升自身攻击力\" + buffValue + \"点，对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害\",\n    expectedValues: {\n      damage: damageValue,\n      buff: buffValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "选择最近的敌人，造成相当于攻击力100%的伤害",
          "icon": "⚔️",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  // 选择最近的敌人\n  const targetEnemy = select.getNearestEnemy();\n  if (!targetEnemy) {\n    return { message: '没有可攻击的敌人', success: false };\n  }\n  \n  // 计算伤害值\n  const damageValue = context.piece.attack * context.skill.powerMultiplier;\n  \n  // 直接修改敌人的生命值\n  targetEnemy.currentHp = Math.max(0, targetEnemy.currentHp - damageValue);\n  \n  return {\n    message: \"造成 \" + damageValue + \" 点伤害\",\n    success: true\n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值\n  const damageValue = Math.round(piece.attack * skillDef.powerMultiplier);\n  \n  return {\n    description: \"选择最近的敌人，造成\" + damageValue + \"点伤害（相当于攻击力100%）\",\n    expectedValues: {\n      damage: damageValue\n    }\n  };\n}",
          "range": "single",
          "requiresTarget": true
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对3格范围内的所有敌人造成相当于攻击力150%的伤害",
          "icon": "🔥",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  // 计算伤害值\n  const damageValue = context.piece.attack * context.skill.powerMultiplier;\n  \n  // 选择3格内的所有敌人\n  const enemies = select.getEnemiesInRange(3);\n  if (enemies.length === 0) {\n    return { message: '范围内没有可攻击的敌人', success: false };\n  }\n  \n  // 直接修改每个敌人的生命值\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return {\n    message: \"火球爆炸，对范围内\" + enemies.length + \"个敌人造成\" + damageValue + \"点伤害\",\n    success: true\n  }\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值\n  const damageValue = Math.round(piece.attack * skillDef.powerMultiplier);\n  const areaSize = skillDef.areaSize || 3;\n  \n  return {\n    description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害（相当于攻击力150%）\",\n    expectedValues: {\n      damage: damageValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "Teleport",
          "description": "传送到目标位置，冷却2回合",
          "icon": "🚀",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: 'Teleport activated', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771361118594_8536",
        "turnNumber": 2,
        "phase": "action",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": true,
          "hasUsedChargeSkill": false
        }
      }
    }
  },
  {
    "id": "dbvvq",
    "name": "yogdizewa 的 1v1 房间",
    "status": "waiting",
    "createdAt": 1771492390648,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771484840385_7362",
        "name": "yogdizewa",
        "joinedAt": 1771492390718,
        "faction": "red",
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-warrior",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "hostId": "user_1771484840385_7362",
    "mapId": "arena-8x6",
    "visibility": "private",
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": null
  },
  {
    "id": "ti3ao",
    "name": "admin 的 1v1 房间",
    "status": "in-progress",
    "createdAt": 1771493287921,
    "maxPlayers": 2,
    "players": [
      {
        "id": "user_1771360858632_9522",
        "name": "admin",
        "joinedAt": 1771493287961,
        "faction": "red",
        "selectedPieces": [
          {
            "templateId": "red-mage",
            "faction": "red"
          },
          {
            "templateId": "red-archer",
            "faction": "red"
          }
        ],
        "hasSelectedPieces": true
      },
      {
        "id": "user_1771361118594_8536",
        "name": "Longaadream",
        "joinedAt": 1771493294476,
        "faction": "blue",
        "selectedPieces": [
          {
            "templateId": "blue-mage",
            "faction": "blue"
          },
          {
            "templateId": "blue-archer",
            "faction": "blue"
          }
        ],
        "hasSelectedPieces": true
      }
    ],
    "hostId": "user_1771360858632_9522",
    "mapId": "arena-8x6",
    "visibility": "public",
    "currentTurnIndex": 0,
    "actions": [],
    "battleState": {
      "map": {
        "id": "default-8x6",
        "name": "默认地图",
        "width": 8,
        "height": 6,
        "tiles": [
          {
            "id": "default-0-0",
            "x": 0,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-0",
            "x": 1,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-0",
            "x": 2,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-0",
            "x": 3,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-0",
            "x": 4,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-0",
            "x": 5,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-0",
            "x": 6,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-0",
            "x": 7,
            "y": 0,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-1",
            "x": 0,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-1",
            "x": 1,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-1",
            "x": 2,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-1",
            "x": 3,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-1",
            "x": 4,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-1",
            "x": 5,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-1",
            "x": 6,
            "y": 1,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-1",
            "x": 7,
            "y": 1,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-2",
            "x": 0,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-2",
            "x": 1,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-2",
            "x": 2,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-2",
            "x": 3,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-2",
            "x": 4,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-2",
            "x": 5,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-2",
            "x": 6,
            "y": 2,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-2",
            "x": 7,
            "y": 2,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-3",
            "x": 0,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-3",
            "x": 1,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-3",
            "x": 2,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-3",
            "x": 3,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-3",
            "x": 4,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-3",
            "x": 5,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-3",
            "x": 6,
            "y": 3,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-3",
            "x": 7,
            "y": 3,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-4",
            "x": 0,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-4",
            "x": 1,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-2-4",
            "x": 2,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-3-4",
            "x": 3,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-4-4",
            "x": 4,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-5-4",
            "x": 5,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-6-4",
            "x": 6,
            "y": 4,
            "props": {
              "walkable": true,
              "bulletPassable": true,
              "type": "floor"
            }
          },
          {
            "id": "default-7-4",
            "x": 7,
            "y": 4,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-0-5",
            "x": 0,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-1-5",
            "x": 1,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-2-5",
            "x": 2,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-3-5",
            "x": 3,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-4-5",
            "x": 4,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-5-5",
            "x": 5,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-6-5",
            "x": 6,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          },
          {
            "id": "default-7-5",
            "x": 7,
            "y": 5,
            "props": {
              "walkable": false,
              "bulletPassable": false,
              "type": "wall"
            }
          }
        ],
        "rules": []
      },
      "pieces": [
        {
          "instanceId": "user_1771360858632_9522-1",
          "templateId": "red-mage",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 3,
          "maxHp": 3,
          "attack": 2,
          "defense": 0,
          "moveRange": 2,
          "x": 6,
          "y": 1,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 2,
              "currentCharges": 0,
              "unlocked": true,
              "usesRemaining": -1
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true,
              "usesRemaining": -1
            }
          ]
        },
        {
          "instanceId": "user_1771360858632_9522-2",
          "templateId": "red-archer",
          "ownerPlayerId": "user_1771360858632_9522",
          "faction": "red",
          "currentHp": 4,
          "maxHp": 4,
          "attack": 2,
          "defense": 0,
          "moveRange": 4,
          "x": 2,
          "y": 4,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true,
              "usesRemaining": -1
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true,
              "usesRemaining": -1
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-1",
          "templateId": "blue-mage",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 3,
          "maxHp": 3,
          "attack": 2,
          "defense": 0,
          "moveRange": 2,
          "x": 1,
          "y": 3,
          "skills": [
            {
              "skillId": "teleport",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true,
              "usesRemaining": -1
            },
            {
              "skillId": "fireball",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true,
              "usesRemaining": -1
            }
          ]
        },
        {
          "instanceId": "user_1771361118594_8536-2",
          "templateId": "blue-archer",
          "ownerPlayerId": "user_1771361118594_8536",
          "faction": "blue",
          "currentHp": 4,
          "maxHp": 4,
          "attack": 2,
          "defense": 0,
          "moveRange": 4,
          "x": 3,
          "y": 2,
          "skills": [
            {
              "skillId": "basic-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true,
              "usesRemaining": -1
            },
            {
              "skillId": "buff-attack",
              "currentCooldown": 0,
              "currentCharges": 0,
              "unlocked": true,
              "usesRemaining": -1
            }
          ]
        }
      ],
      "pieceStatsByTemplateId": {
        "red-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        },
        "blue-warrior": {
          "maxHp": 120,
          "attack": 20,
          "defense": 5,
          "moveRange": 3
        }
      },
      "skillsById": {
        "arcane-burst": {
          "id": "arcane-burst",
          "name": "Arcane Burst",
          "description": "传送到目标位置，提升自身攻击力15点，对5格范围内的所有敌人造成相当于攻击力250%的伤害",
          "icon": "✨",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 3,
          "maxCharges": 1,
          "chargeCost": 1,
          "powerMultiplier": 2,
          "code": "function executeSkill(context) {\n  // 使用teleport函数进行传送\n  teleport();\n  \n  // 直接修改自身的攻击力（buff效果）\n  const buffValue = 15;\n  sourcePiece.attack += buffValue;\n  \n  // 直接修改范围内敌人的生命值（damage效果）\n  const damageValue = sourcePiece.attack * 2.5;\n  const enemies = select.getEnemiesInRange(5);\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return { \n    message: sourcePiece.templateId + ' 激活了奥术爆发，提升攻击力' + buffValue + '点，对' + enemies.length + '个敌人造成' + damageValue + '点伤害', \n    success: true \n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值和增益值\n  const buffValue = 15;\n  const damageValue = Math.round((piece.attack + buffValue) * 2.5); // 考虑增益后的攻击力\n  const areaSize = skillDef.areaSize || 5;\n  \n  return {\n    description: \"传送到目标位置，提升自身攻击力\" + buffValue + \"点，对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害\",\n    expectedValues: {\n      damage: damageValue,\n      buff: buffValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "arcane-combination": {
          "id": "arcane-combination",
          "name": "Arcane Combination",
          "description": "传送到目标位置，提升自身攻击力10点，对5格范围内的所有敌人造成50点伤害",
          "icon": "🌟",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 3,
          "maxCharges": 1,
          "chargeCost": 1,
          "powerMultiplier": 2,
          "code": "function executeSkill(context) {\n  // 使用teleport函数进行传送\n  teleport();\n  \n  // 直接修改自身的攻击力（buff效果）\n  const buffValue = 10;\n  sourcePiece.attack += buffValue;\n  \n  // 直接修改范围内敌人的生命值（damage效果）\n  const damageValue = 50;\n  const enemies = select.getEnemiesInRange(5);\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return { message: sourcePiece.templateId + ' 激活了奥术组合，提升攻击力' + buffValue + '点，对' + enemies.length + '个敌人造成' + damageValue + '点伤害', success: true };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值和增益值\n  const buffValue = 10;\n  const damageValue = 50; // 固定伤害值\n  const areaSize = skillDef.areaSize || 5;\n  \n  return {\n    description: \"传送到目标位置，提升自身攻击力\" + buffValue + \"点，对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害\",\n    expectedValues: {\n      damage: damageValue,\n      buff: buffValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        },
        "basic-attack": {
          "id": "basic-attack",
          "name": "基础攻击",
          "description": "选择最近的敌人，造成相当于攻击力100%的伤害",
          "icon": "⚔️",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  // 选择最近的敌人\n  const targetEnemy = select.getNearestEnemy();\n  if (!targetEnemy) {\n    return { message: '没有可攻击的敌人', success: false };\n  }\n  \n  // 计算伤害值\n  const damageValue = sourcePiece.attack * context.skill.powerMultiplier;\n  \n  // 直接修改敌人的生命值\n  targetEnemy.currentHp = Math.max(0, targetEnemy.currentHp - damageValue);\n  \n  return {\n    message: sourcePiece.templateId + ' 造成 ' + damageValue + ' 点伤害',\n    success: true\n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值\n  const damageValue = Math.round(piece.attack * skillDef.powerMultiplier);\n  \n  return {\n    description: \"选择最近的敌人，造成\" + damageValue + \"点伤害（相当于攻击力100%）\",\n    expectedValues: {\n      damage: damageValue\n    }\n  };\n}",
          "range": "single",
          "requiresTarget": true
        },
        "buff-attack": {
          "id": "buff-attack",
          "name": "攻击强化",
          "description": "提升自身攻击力1点，增强后续攻击效果",
          "icon": "💪",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 4,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  // 直接修改自身的攻击力\nsourcePiece.attack = sourcePiece.attack + 1;\n  \n  return {\n    message: sourcePiece.templateId + '的攻击力提升至' + sourcePiece.attack + '点',\n    success: true\n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 固定增益值\n  const buffValue = 1;\n  \n  return {\n    description: \"提升自身攻击力\" + buffValue + \"点，增强后续攻击效果\",\n    expectedValues: {\n      buff: buffValue\n    }\n  };\n}",
          "range": "self",
          "requiresTarget": false
        },
        "fireball": {
          "id": "fireball",
          "name": "火球术",
          "description": "对3格范围内的所有敌人造成相当于攻击力150%的伤害",
          "icon": "🔥",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 2,
          "maxCharges": 3,
          "chargeCost": 1,
          "powerMultiplier": 1.5,
          "code": "function executeSkill(context) {\n  // 计算伤害值\n  const damageValue = sourcePiece.attack * context.skill.powerMultiplier;\n  \n  // 选择3格内的所有敌人\n  const enemies = select.getEnemiesInRange(3);\n  if (enemies.length === 0) {\n    return { message: sourcePiece.templateId + '周围没有可攻击的敌人', success: false };\n  }\n  \n  // 直接修改每个敌人的生命值\n  enemies.forEach(enemy => {\n    enemy.currentHp = Math.max(0, enemy.currentHp - damageValue);\n  });\n  \n  return {\n    message: sourcePiece.templateId + \"对\" + enemies.length + \"个敌人造成\" + damageValue + \"点伤害\",\n    success: true\n  }\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 计算预期伤害值\n  const damageValue = Math.round(piece.attack * skillDef.powerMultiplier);\n  const areaSize = skillDef.areaSize || 3;\n  \n  return {\n    description: \"对\" + areaSize + \"格范围内的所有敌人造成\" + damageValue + \"点伤害（相当于攻击力150%）\",\n    expectedValues: {\n      damage: damageValue\n    }\n  };\n}",
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "retaliation": {
          "id": "retaliation",
          "name": "反击",
          "description": "当受到伤害时，选择一个3格内的目标，造成100%攻击力的伤害",
          "kind": "passive",
          "type": "normal",
          "cooldownTurns": 1,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: '反击被动技能已激活', success: true } }",
          "range": "area",
          "areaSize": 3,
          "requiresTarget": false
        },
        "shield": {
          "id": "shield",
          "name": "护盾术",
          "description": "为自身提供50点护盾，吸收伤害",
          "icon": "🛡️",
          "kind": "active",
          "type": "super",
          "cooldownTurns": 4,
          "maxCharges": 2,
          "chargeCost": 1,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  // 直接修改自身的护盾值\n  const shieldValue = 50;\n  if (!context.piece.shield) {\n    context.piece.shield = 0;\n  }\n  context.piece.shield += shieldValue;\n  \n  return {\n    message: \"护盾术生效，获得\" + shieldValue + \"点护盾\",\n    success: true\n  };\n}",
          "previewCode": "function calculatePreview(piece, skillDef) {\n  // 固定护盾值\n  const shieldValue = 50;\n  \n  return {\n    description: \"为自身提供\" + shieldValue + \"点护盾，吸收伤害\",\n    expectedValues: {\n      heal: shieldValue // 使用heal字段表示护盾值，因为它们都是正面效果 \n}\n  };\n}",
          "range": "self",
          "requiresTarget": false
        },
        "soul-harvest": {
          "id": "soul-harvest",
          "name": "灵魂收割",
          "description": "当一个敌方角色死亡时，获得等同于其最大生命值的最大生命值，并且增加其最大生命值的血量",
          "kind": "passive",
          "type": "normal",
          "cooldownTurns": 0,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) {\n  const reaper = context.piece;\n  const victim = context.targetPiece;\n  if (victim) {\n    const soulPower = victim.maxHp;\n    // 增加最大生命值\n    reaper.maxHp += soulPower;\n    // 增加当前生命值\n    reaper.currentHp += soulPower;\n    return { message: reaper.templateId + '从' + victim.templateId + '的死亡中汲取力量，生命值增加' + soulPower, success: true };\n  }\n  return { message: '没有灵魂可以收割', success: false };\n}",
          "range": "self",
          "requiresTarget": false
        },
        "teleport": {
          "id": "teleport",
          "name": "Teleport",
          "description": "传送到目标位置，冷却2回合",
          "icon": "🚀",
          "kind": "active",
          "type": "normal",
          "cooldownTurns": 2,
          "maxCharges": 0,
          "powerMultiplier": 1,
          "code": "function executeSkill(context) { return { message: sourcePiece.templateId + '使用了传送技能', success: true } }",
          "previewCode": "function calculatePreview(piece, skillDef) { const areaSize = skillDef.areaSize || 5; return { description: \"传送到目标位置，冷却2回合（\" + areaSize + \"格范围内）\", expectedValues: {} }; }",
          "effects": [],
          "range": "area",
          "areaSize": 5,
          "requiresTarget": true
        }
      },
      "players": [
        {
          "playerId": "user_1771360858632_9522",
          "chargePoints": 0,
          "actionPoints": null,
          "maxActionPoints": 10
        },
        {
          "playerId": "user_1771361118594_8536",
          "chargePoints": 0,
          "actionPoints": 1,
          "maxActionPoints": 10
        }
      ],
      "turn": {
        "currentPlayerId": "user_1771360858632_9522",
        "turnNumber": 1,
        "phase": "end",
        "actions": {
          "hasMoved": false,
          "hasUsedBasicSkill": true,
          "hasUsedChargeSkill": false
        }
      },
      "actions": [
        {
          "type": "useBasicSkill",
          "playerId": "user_1771360858632_9522",
          "turn": 1,
          "payload": {
            "message": "red-mage使用了传送技能",
            "skillId": "teleport",
            "pieceId": "user_1771360858632_9522-1"
          }
        }
      ]
    }
  }
]