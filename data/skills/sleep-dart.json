{"id":"sleep-dart","name":"éº»é†‰é•–","description":"é€‰æ‹©ä¸€ä¸ªæ ¼å­ï¼Œå‘è¯¥æ ¼å­ç›¸å¯¹æ–¹å‘å‘å°„ä¸€ä¸ªéº»é†‰é•–5æ ¼ï¼Œå¦‚æœæœ‰æ•Œäººåˆ™æ–½åŠ éº»é†‰2å›åˆ","icon":"ğŸ’¤","kind":"active","type":"normal","form":"projectile","cooldownTurns":4,"maxCharges":0,"powerMultiplier":1,"actionPointCost":2,"code":"function executeSkill(context) { var sourcePiece = context.piece; var targetPosition = selectTarget({ type: 'grid', range: 5, filter: 'all' }); if (!targetPosition || targetPosition.needsTargetSelection) { return targetPosition; } var targetX = targetPosition.x; var targetY = targetPosition.y; var sourceX = sourcePiece.x; var sourceY = sourcePiece.y; var dirX = targetX - sourceX; var dirY = targetY - sourceY; var maxSteps = 5; var stepX = 0; var stepY = 0; if (dirX !== 0) stepX = dirX > 0 ? 1 : -1; if (dirY !== 0) stepY = dirY > 0 ? 1 : -1; if (stepX === 0 && stepY === 0) { return { message: 'æ— æ³•å‘è‡ªèº«æ–¹å‘å‘å°„', success: false }; } for (var step = 1; step <= maxSteps; step++) { var checkX = sourceX + stepX * step; var checkY = sourceY + stepY * step; var targetPiece = select.getPieceAt(checkX, checkY); if (targetPiece && targetPiece.currentHp > 0) { var isEnemy = targetPiece.ownerPlayerId !== sourcePiece.ownerPlayerId; if (isEnemy) { var statusId = 'sleep-' + Date.now(); addStatusEffectById(targetPiece.instanceId, { id: statusId, type: 'sleep', currentDuration: 2, intensity: 1, relatedRules: ['rule-sleep-prevent-move', 'rule-sleep-prevent-skill', 'rule-sleep-remove-on-damage'] }); addRuleById(targetPiece.instanceId, 'rule-sleep-prevent-move'); addRuleById(targetPiece.instanceId, 'rule-sleep-prevent-skill'); addRuleById(targetPiece.instanceId, 'rule-sleep-remove-on-damage'); addSkillById(targetPiece.instanceId, 'sleep-prevent'); addSkillById(targetPiece.instanceId, 'sleep-remove'); return { message: sourcePiece.name + 'çš„éº»é†‰é•–å‘½ä¸­' + targetPiece.name + 'ï¼Œä½¿å…¶è¿›å…¥éº»é†‰çŠ¶æ€2å›åˆ', success: true }; } } } return { message: 'éº»é†‰é•–é£è¡Œ5æ ¼ä½†æœªå‘½ä¸­æ•Œäºº', success: true }; }","previewCode":"function calculatePreview(piece, skillDef) { return { description: 'å‘é€‰æ‹©æ–¹å‘å‘å°„éº»é†‰é•–ï¼Œé£è¡Œ5æ ¼ï¼Œå‘½ä¸­æ•Œäººåˆ™ä½¿å…¶éº»é†‰2å›åˆï¼ˆæ— æ³•ç§»åŠ¨ã€æ— æ³•ä½¿ç”¨æŠ€èƒ½ç›´åˆ°å—åˆ°ä¼¤å®³ï¼‰', expectedValues: {} }; }","range":"single","requiresTarget":true}
