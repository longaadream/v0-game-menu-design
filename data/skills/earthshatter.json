{
  "id": "earthshatter",
  "name": "æ¯å¤©ç­åœ°",
  "description": "é€‰æ‹©ä¸€ä¸ªæ— é®æŒ¡å’Œæ£‹å­çš„æ ¼å­ï¼Œä»å¤©è€Œé™é™è½åˆ°è¯¥æ ¼å­å¹¶å¯¹ä»¥è¯¥æ ¼å­ä¸ºä¸­å¿ƒçš„3*3åŒºåŸŸçš„æ•Œäººé€ æˆ100%æ”»å‡»åŠ›çš„ç‰©ç†ä¼¤å®³",
  "icon": "ğŸŒ‹",
  "kind": "active",
  "type": "ultimate",
  "cooldownTurns": 1,
  "maxCharges": 1,
  "powerMultiplier": 1.0,
  "actionPointCost": 0,
  "code": "function executeSkill(context) {\n  const targetPos = context.targetPosition;\n  if (!targetPos) {\n    return { message: 'è¯·é€‰æ‹©é™è½ä½ç½®', success: false };\n  }\n  if (!context.battleMap.isPositionValid(targetPos)) {\n    return { message: 'æ— æ•ˆçš„ä½ç½®', success: false };\n  }\n  const pieceAtPos = context.battleMap.getPieceAt(targetPos);\n  if (pieceAtPos) {\n    return { message: 'è¯¥ä½ç½®å·²æœ‰æ£‹å­', success: false };\n  }\n  sourcePiece.position = targetPos;\n  const damageValue = sourcePiece.attack * context.skill.powerMultiplier;\n  const affectedEnemies = [];\n  let totalDamage = 0;\n  for (let dx = -1; dx <= 1; dx++) {\n    for (let dy = -1; dy <= 1; dy++) {\n      const checkPos = { x: targetPos.x + dx, y: targetPos.y + dy };
      if (context.battleMap.isPositionValid(checkPos)) {\n        const enemyAtPos = context.battleMap.getPieceAt(checkPos);\n        if (enemyAtPos && enemyAtPos.faction !== sourcePiece.faction) {\n          const damageResult = dealDamage(enemyAtPos, damageValue, 'physical', context.skill.id);\n          if (damageResult.success) {\n            affectedEnemies.push(enemyAtPos.templateId);\n            totalDamage += damageResult.damage;\n          }\n        }\n      }\n    }\n  }\n  if (affectedEnemies.length > 0) {\n    return { message: sourcePiece.templateId + ' ä»å¤©è€Œé™ï¼Œå¯¹ ' + affectedEnemies.join(', ') + ' é€ æˆ ' + totalDamage + ' ç‚¹ä¼¤å®³', success: true };\n  }\n  return { message: sourcePiece.templateId + ' ä»å¤©è€Œé™', success: true };\n}",
  "previewCode": "function calculatePreview(piece, skillDef) {\n  const damageValue = Math.round(piece.attack * skillDef.powerMultiplier);\n  return { description: 'é€‰æ‹©ä¸€ä¸ªå®‰å…¨ä½ç½®é™è½ï¼Œå¯¹3*3åŒºåŸŸå†…çš„æ•Œäººé€ æˆ' + damageValue + 'ç‚¹ä¼¤å®³ï¼ˆç›¸å½“äºæ”»å‡»åŠ›100%ï¼‰', expectedValues: { damage: damageValue, area: '3*3' } };\n}",
  "range": "area",
  "requiresTarget": false
}